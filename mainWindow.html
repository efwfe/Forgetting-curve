<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">
    <title>Document</title>
</head>
<body >
    <nav>
        <div class="nav-wrapper" style="-webkit-app-region: drag">
            <a  class="brand-logo center">main head</a>
        </div>
    </nav>
    <ul>

    </ul>
    <button id='quit'>quit</button>
    <button id='add'>add</button>

</body>
<script>

    const electron = require("electron");
    const {ipcRenderer} = electron;

    const qBtn = document.getElementById('quit');
    const addBtn = document.getElementById('add');
    qBtn.addEventListener("click",quitApp);
    addBtn.addEventListener("click",addWindow);
    // 退出应用
    function quitApp(e){
        ipcRenderer.send("app:quit");
    };

    // 添加窗口
    function addWindow(e){
        ipcRenderer.send("app:addwindow");
    };

    
    // 双击元素 删除

    function delElem(e){
        ipcRenderer.send("item:del",e.target.textContent);
    };


    // 数据更新
    ipcRenderer.on("items",(e,itemData) =>{
        lists = document.querySelector("ul");
        tmp = ""
        for (var i=0;i<itemData.length;i++)
        {
            console.log(itemData[i]);
             tmp += "<li id='item'>"+itemData[i]+"</li>";
             
        }
        lists.innerHTML = tmp;
        lists.querySelectorAll('#item').forEach(item => {
        item.addEventListener('dblclick', delElem)
  })
    });
    

</script>
</html>